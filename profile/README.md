# TryOn Wardrobe
## Мобильное приложение, в которое пользователь может загрузить свою одежду и получить рекомендации образов, а также примерить их на свое фото.

- Автоматически определяется категории и типы одежды, происходит обрезка
- Генерируй новые образы с помощью AI на основе вещей в своем гардеробе
- Лента с рекомендациями образов других пользователей
- Примеряй образы других пользователей на фото человека


## Установка для Android
- Скачать файл [TryOn Wardrobe.apk](https://github.com/WIP-VK-Spring-2024/Try-On-Wardrobe-App/releases/download/release/TryOn.Wardrobe.apk) из репозитория и установить как приложение из сторонних источников.

## Установка для IOS
- Требует IOS developer для публикаций в app store, для установки требуется локально собирать проект.

## Releases

### Release 1.0.0
> Первая версия полноценного продукта.
#### [ML Python backend](https://github.com/WIP-VK-Spring-2024/Virtual-Wardrobe-ML/releases/tag/release)
#### [Go backend](https://github.com/WIP-VK-Spring-2024/try-on-wardrobe-backend/releases/tag/release)
#### [Mobile app](https://github.com/WIP-VK-Spring-2024/Try-On-Wardrobe-App/releases/tag/release)

#### [Презентация продукта](https://github.com/WIP-VK-Spring-2024/.github/blob/main/Презентация_TryOn%20Wardrobe%20WIP.pdf)

## Техническое описание
Проет состоит из 4 основных компонентов:
- клиент на React-native
- основной бэкенд на Go
- вспомогательный бэкенд на Python (далее - ML-сервер)
- набор моделей машинного обучения (модель примерки, модели удаления фона, модель классификации, модель автогенерации комплектов одежды, рекомендательная система)

Кроме этого, в проекте используются следующие СУБД и другие вспомогательные компоненты:
- PostgreSQL - основная СУБД
- Redis - используется для кеширования ответов рекомендательной системы
- Centrifugo - сервер сообщений, используется для асинхронной передачи клиенту результатов работы моделей машинного обучения по протоколу Websocket
- S3 - используется для хранения изображений
- nginx - прокси-сервер, проксирует запросы от клиента на Go-бэкенд, Centrifugo и S3
- RabbitMQ - используется для асинхронного обмена сообщениями между Go-бэкендом и моделями машинного обучения
- [WeatherAPI](https://www.weatherapi.com/) - опционально используется в препроцессинге входных моделей для модели автогенерации комплектов одежды

### Клиент
Написан на React-native и UI-фреймворке gluestack-ui. Также используются вспомогательные Open-Source библиотеки.
Тестировался под Android, корректная работа на iOS возможна при небольших изменениях кода

### Go-бэкенд
- принимает запросы от клиента
- отправляет запросы на обработку моделям в очереди RabbitMQ
- возвращает ответы от моделей в Centrifugo через gRPC (дальше клиент читает через Websocket-соединение, поддерживаемое Centrifugo)
- получает информацию о статусах моделей от ML-сервера
- загружает изображения в S3 через ML-сервер
- кеширует ответы от рекомендательной системы в Redis (чтобы уменьшить кол-во походов через RabbitMQ и при этом не отправлять клиенту все сразу)

### ML-сервер
- загружает изображения в S3
- отдает информацию о статусах моделей

### Модели машинного обучения
1) Модель примерки - IDM-Vton (open-source, основана на Stable Diffusion)
2) Модели удаления фона (SegFormer + SAM) и классификации (Clip) (open-source, в одном сервисе)
3) Модель генерации комплектов одежды (самописная)
4) Рекомендательная система - рекомендует посты пользователей (самописная)

Все модели - сервисы на Python, которые обрабатывают сообщения из очередей RabbitMQ  
Изображения они читают и загружают напрямую из S3
